<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Birthday</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
    <style>
      @font-face {
        font-family: "NB Akademie";
        src: url("fonts/NB Akademie Mono Std.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      /* Minified CSS */
      *{margin:0;padding:0;box-sizing:border-box}body{font-family:"NB Akademie",sans-serif;background:#f4f4f4;color:#333;overflow-x:hidden;letter-spacing:-.5px;height:100px}header{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin:0;padding:10px 0;border:2px solid black;width:100%}.title-carousel{width:60%;height:20px;overflow:hidden;position:relative;text-align:center;padding:10px 0;display:flex;justify-content:center;align-items:center;border:none;flex-grow:1;margin:0 20px}.title-images{position:relative;width:80%;height:100%;display:flex;justify-content:center;align-items:center}.title-images img{max-width:100%;max-height:100%;object-fit:contain;position:absolute;top:3px;left:0;width:auto;height:60%;margin:auto;opacity:0;animation:fadeInOut 2.5s linear infinite}.title-images img:nth-child(1){animation-delay:0s}.title-images img:nth-child(2){animation-delay:.5s}.title-images img:nth-child(3){animation-delay:1s}.title-images img:nth-child(4){animation-delay:1.5s}.title-images img:nth-child(5){animation-delay:2s}@keyframes fadeInOut{0%,20%{opacity:1}25%,100%{opacity:0}}
      header h1 {
        font-size: 3rem;
        font-weight: bold;
        letter-spacing: 2px;
      }

      header p {
        font-size: 1.2rem;
        margin-top: 10px;
      }

      .carousel {
        width: 100%; /* Full width banner */
        position: relative;
        display: flex;
        justify-content: right; /* Center the carousel */
      }

      .carousel-images {
        display: flex;
        justify-content: center;
      }

      .carousel-images img {
        width: 20%; /* Show more images at a time to create the illusion of faster movement */
        flex-shrink: 0;
      }

      @keyframes scroll {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-100%); /* Adjusted to loop seamlessly */
        }
      }

      .content {
        padding: 20px 10px; /* Reduced vertical margins */
        text-align: left;

      }

      .content h2 {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 20px;
      }

      .content p {
        font-size: 1.2rem;
        line-height: 1.6;
        color: #555;
        margin: 10px 10px; /* Added margin between paragraphs */
      }

      .rsvp-section {
        background: #000;
        color: #fff;
        padding: 30px 10px; /* Reduced vertical margins */
        text-align: center;
      }

      .rsvp-section h2 {
        font-size: 2rem;
        margin-bottom: 20px;
      }

      .rsvp-form {
        display: flex;
        flex-direction: column;
        gap: 15px;
        max-width: 400px;
        margin: 0 auto;
      }

      .rsvp-form input,
      .rsvp-form select,
      .rsvp-form button {
        padding: 10px;
        border: none;
        border-radius: 5px;
        font-size: 1rem;
        font-family: "NB Akademie", sans-serif; /* Match the global font */
      }

      .rsvp-form button {
        background: #ff4081;
        color: #fff;
        cursor: pointer;
        transition: background 0.3s;
      }

      .rsvp-form button:hover {
        background: #e91e63;
      }

      .rsvp-form input[type="checkbox"] {
        accent-color: #ff4081; /* Match the pink color of the submit button */
      }

      footer {
        background: #222;
        color: #fff;
        text-align: center;
        padding: 20px;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        header {
          padding: 0px 2px; /* Adjust padding for smaller screens */
        }

        header h1 {
          font-size: 2rem; /* Reduce font size for mobile */
        }

        header p {
          font-size: 1rem; /* Adjust paragraph font size */
        }

        .carousel {
          height: 160px; /* Adjust carousel height for mobile */
          width: 50%;
        }

        .carousel-images img {
          width: 10%; /* Show more images at a time */
        }

        .content {
          padding: 20px 10px; /* Reduce padding for content */
        }

        .content h2 {
          font-size: 2rem; /* Adjust heading size */
        }

        .content p {
          font-size: 1rem; /* Adjust paragraph size */
        }

        .rsvp-section {
          padding: 30px 10px; /* Adjust RSVP section padding */
        }

        .rsvp-form {
          gap: 10px; /* Reduce gap between form elements */
        }

        .rsvp-form input,
        .rsvp-form select,
        .rsvp-form button {
          font-size: 0.9rem; /* Adjust form element font size */
        }

        .title-carousel {
          height: 70px; /* Adjusted for mobile */
        }

        .title-images img {
          height: 80%; /* Slightly larger for mobile */
        }
      }

      .title-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        padding: 0px 0;
      }

      .box {
        width: 50px;
        height: 65px;
        border: 2px solid black;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 0; /* Removed any padding */
      }

      .rsvp-list-section {
        padding: 20; /* Removed padding to eliminate the gap */
        background: #f9f9f9;
        border-top: 1px solid #ddd;
        position: relative;
        z-index: 10;
      }

      .rsvp-list-section h2 {
        font-size: 1.5rem;
        margin-bottom: 10px;
        padding-top: 0px;
        text-align: center;
      }

      .rsvp-list-section ul {
        list-style: none;
        padding: 0;
      }

      .rsvp-list-section li {
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }

      .rsvp-list-section li:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="title-container">
        <div class="box">
          <img
            src="images/fish.webp"
            alt="Fish Image"
            style="width: 100%; height: 100%; object-fit: contain"
          />
        </div>
        <div class="title-carousel">
          <div class="title-images"></div>
        </div>
        <div class="box">
          <img
            src="images/fish.webp"
            alt="Fish Image"
            style="width: 100%; height: 100%; object-fit: contain"
          />
        </div>
      </div>
    </header>

    <div class="content">
      <h2>For My Birthday</h2>
      <div class="text-align-left">
        <p class="font-bold">I am planning a fishing trip</p>
        <p>On Saturday, September 27 from 1-5pm</p>
        <div class="carousel" id="carousel">
          <div class="carousel-images"></div>
        </div>
        <p>
          The boat leaves out of Sheepshead Bay and lasts 4 hours. They provide
          you with all the bait, equipment, and instruction and if you catch a
          fish that's of legal size/type they will filet it and you can take it
          home... also we can bring food and drinks on the boat</a>.
        </p>
        <br />
        <p style="text-align: center;">
          <a href="more-info.html" style="text-decoration: none; color: blue;">
            ðŸŒ€ More details here ðŸŒ€
          </a>
        </p>
        <br />
        <p>
          Seriously no pressure if this is not your vibe
          <img
            src="https://i.pinimg.com/originals/08/87/0b/08870bc524f48cf615db1582575a5e4e.gif"
            alt="Love"
            style="width: auto; height: 14px; margin-left: 0px"
          />

          ALL LOVE Thank you for reading all of this...
        </p>
      </div>
    </div>

    <div class="rsvp-section" style="position: relative; z-index: 100">
      <h2>RSVP</h2>
      <form class="rsvp-form" id="rsvpForm">
        <input type="text" id="name" placeholder="Name" required />
        <input type="tel" id="phone" placeholder="Phone Number" required />
        <!-- <label for="plusOne" style="display: flex; align-items: center; gap: 5px;">
          <input type="checkbox" id="plusOne" />
          bringing a +1?
        </label> -->
        <button type="submit">Submit</button>
      </form>
    </div>

    <div class="rsvp-list-section">
      <div
        style="
          display: flex;
          justify-content: center;
          gap: 10px;
          margin-bottom: 20px;
          margin-top: 20px;
          
        "
      >
        <img
          src="images/flounder.gif"
          alt="Flounder"
          style="width: auto; height: 45px"
        />
        <img
          src="images/flounder.gif"
          alt="Flounder"
          style="width: auto; height: 45px; transform: scaleX(-1)"
        />
        <img
          src="images/flounder.gif"
          alt="Flounder"
          style="width: auto; height: 45px"
        />
        <img
          src="images/flounder.gif"
          alt="Flounder"
          style="width: auto; height: 45px; transform: scaleX(-1)"
        />
        <img
          src="images/flounder.gif"
          alt="Flounder"
          style="width: auto; height: 45px"
        />
      </div>
      <h2>Guest List</h2>
      <ul id="rsvpDisplayList">
        <!-- RSVPs will be dynamically loaded here -->
      </ul>
    </div>

    <div style="text-align: center; margin-top: -150px">
      <img
        src="images/ocean.gif"
        alt="Ocean"
        style="max-width: 100%; height: auto"
      />
    </div>

    <script>
      const carousel = document.getElementById("carousel");
      const carouselImages = carousel.querySelector(".carousel-images");

      const carouselImagePaths = [
        "images/carousel/IMG_0329.webp",
         "images/carousel/IMG_7412.webp",
        "images/carousel/IMG_5143.webp",
        "images/carousel/IMG_7248.webp",
        "images/carousel/IMG_7249.webp",
        "images/carousel/IMG_7252.webp",
        "images/carousel/IMG_7289.webp",
        "images/carousel/IMG_7300.webp",
        "images/carousel/IMG_7306.webp",
        "images/carousel/IMG_7311.webp",
        "images/carousel/IMG_7315.webp",
        "images/carousel/IMG_7250.webp",
        "images/carousel/IMG_7330.webp",
        "images/carousel/IMG_7334.webp",
        "images/carousel/IMG_7355.webp",
        "images/carousel/IMG_7389.webp",
        "images/carousel/IMG_2280.webp",
        "images/carousel/IMG_7396.webp",
        "images/carousel/IMG_7420.webp",
        "images/carousel/IMG_7425.webp",
        "images/carousel/IMG_7428.webp",
        "images/carousel/SAM_1350.webp",
        "images/carousel/SAM_1353.webp",
      ];

      const createImageElement = (path) => {
        const img = document.createElement("img");
        img.src = path;
        img.alt = "Image";
        // Removed lazy loading
        img.style.opacity = 0;
        img.style.transition = "opacity 0.5s ease-in-out";
        img.style.position = "absolute";
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "cover";
        img.style.background = "#f4f4f4"; // Placeholder background

        img.onload = () => {
          img.style.opacity = 1;
        };

        return img;
      };

      const carouselContainer = document.querySelector(".carousel-images");

      // Clear existing images
      carouselContainer.innerHTML = "";

      // Add images to the carousel container
      carouselImagePaths.forEach((path, index) => {
        const img = createImageElement(path);

        // Add responsive images for better performance on mobile
        img.srcset = `
          ${path.replace('.webp', '-small.webp')} 480w,
          ${path} 800w
        `;
        img.sizes = "(max-width: 600px) 480px, 800px";

        // Preload the first image
        if (index === 0) {
          const link = document.createElement("link");
          link.rel = "preload";
          link.as = "image";
          link.href = path;
          document.head.appendChild(link);
        }

        carouselContainer.appendChild(img);
      });

      const images = Array.from(carouselContainer.children);
      let currentIndex = 0;

      const showNextImage = () => {
        images.forEach((img, index) => {
          img.style.opacity = index === currentIndex ? 1 : 0;
        });
        currentIndex = (currentIndex + 1) % images.length;
      };

      // Start the carousel only when all images are loaded
      const imagePromises = images.map(
        (img) =>
          new Promise((resolve) => {
            img.onload = resolve;
            img.onerror = resolve; // Resolve even if an image fails to load
          })
      );

      Promise.all(imagePromises).then(() => {
        images[0].style.opacity = 1;
          setInterval(showNextImage, 1000); // Change image every 1 second
          showNextImage(); // Initialize the first image
      });

      const titleImages = document.querySelector(".title-images");
      const titleImagePaths = [
        "images/title/Cool Text - Fishing Boat 490824333899468.png",
        "images/title/cooltext490473119880004 (1).png",
        "images/title/cooltext490473226384828.png",
        "images/title/cooltext490599855617085 (1).png",
        "images/title/cooltext490823411285855.png",
      ];

      // Clear existing images
      titleImages.innerHTML = "";

      // Add all images from the title folder to the keyframe animation
      titleImagePaths.forEach((path) => {
        const img = document.createElement("img");
        img.src = path;
        img.alt = "Title Image";
        titleImages.appendChild(img);
      });

      const rsvpDisplayList = document.getElementById("rsvpDisplayList");

      const flounders = document.querySelectorAll("img[alt='Flounder']");

      setInterval(() => {
        flounders.forEach((flounder) => {
          const currentTransform = flounder.style.transform;
          flounder.style.transform = currentTransform.includes("scaleX(-1)")
            ? "scaleX(1)"
            : "scaleX(-1)";
        });
      }, 1000);


    </script>

    <script type="module">
      // Import Firebase SDK
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
      import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyC46z3cPIfPwWUcosOxrlatfAXy4uPYP44",
        authDomain: "fishing-78a3f.firebaseapp.com",
        databaseURL: "https://fishing-78a3f-default-rtdb.firebaseio.com",
        projectId: "fishing-78a3f",
        storageBucket: "fishing-78a3f.firebasestorage.app",
        messagingSenderId: "185725420885",
        appId: "1:185725420885:web:3ec54353344409374d5bdc",
        measurementId: "G-85WWR1QV6B"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      const emojis = [
        ":Â¨ Â·.Â· Â¨:",
        "`Â· . ð™š",
        "( Ë˜Íˆ áµ• Ë˜Íˆâ™¡)",
        "( á´—ÍˆË¬á´—Íˆ)à´’",
        "à«®â‚  Ë¶â€¢â¤™â€¢Ë¶ â‚Žáƒ",
        "(Â´ï½¡â€¢ áµ• â€¢ï½¡`)",
        "(â¸â¸áµ•á´—áµ•â¸â¸)",
        "Ë—ËË‹ â™¡ ËŽËŠË—",
        "â—(áµ”á—œáµ”)â—œ",
        "(Ë¶Ëƒ áµ• Ë‚Ë¶)",
        ">-;;â ;â ;â‚¬á·",
        "â‹†Ëšê©œï½¡",
        "(*á´—ÍˆË¬á´—Íˆ)ê•¤*.ï¾Ÿ",
        "( ^â€¿^ )ï¾‰ï¾ž",
        "( â€¢ÌÌ¯ â‚ƒ â€¢Ì€Ì¯)",
        "(à¹‘>â—¡<à¹‘)",
        "(âŽâÌ´Ì›á´—âÌ´Ì›âŽ)",
        "âŠ¹â‚ŠâŸ¡â‹†",
        "â‹†âœ´ï¸ŽËšï½¡â‹†",
      ];
      // Function to load RSVPs from Firebase
      function loadRSVPs() {
        const rsvpRef = ref(database, "rsvps");
        onValue(rsvpRef, (snapshot) => {
          const rsvps = snapshot.val();
          const rsvpSection = document.querySelector(".rsvp-list-section");

          if (!rsvps || Object.keys(rsvps).length === 0) {
            rsvpSection.style.display = "none"; // Hide the guest list section if no RSVPs
          } else {
            rsvpSection.style.display = "block"; // Show the guest list section if RSVPs exist
            rsvpDisplayList.innerHTML = "";

            Object.entries(rsvps).forEach(([id, rsvp]) => {
              const listItem = document.createElement("li");
              const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
              listItem.innerHTML = rsvp.plusOne === "Yes"
                ? `${randomEmoji} ${rsvp.name} (<strong style='color: #4a4a4a'>+1</strong>)`
                : `${rsvp.name} ${randomEmoji}`;
              rsvpDisplayList.appendChild(listItem);
            });
          }
        });
      }
      const rsvpForm = document.getElementById("rsvpForm");

      // Event listener for RSVP form submission
      rsvpForm.addEventListener("submit", (event) => {
        event.preventDefault();

        const name = document.getElementById("name").value;
        const phone = document.getElementById("phone").value;
        const plusOne = document.getElementById("plusOne").checked ? "Yes" : "No";

        const rsvp = { name, phone, plusOne };
        const rsvpRef = ref(database, "rsvps");
        push(rsvpRef, rsvp);

        rsvpForm.reset();
      });

      // Load RSVPs on page load
      loadRSVPs();
    </script>
  </body>
</html>
